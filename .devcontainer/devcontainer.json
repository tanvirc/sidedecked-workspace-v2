{
  "name": "Sidedecked Workspace",
  "dockerComposeFile": "docker-compose.yml",
  "service": "workspace",
  // Ensure infra services start with the devcontainer
  "runServices": ["db", "redis"],
  // Stop all compose services when the devcontainer stops
  "shutdownAction": "stopCompose",
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",

  "features": {},

  // Do not forward ports that are already published by sibling services
  // to avoid host port collisions (e.g., db:5432 and redis:6379).
  "forwardPorts": [],
  "postCreateCommand": "bash .devcontainer/scripts/bootstrap.sh",
  "postStartCommand": "bash .github/setup-auth.sh && bash .devcontainer/scripts/configure-git-auth.sh && bash .devcontainer/scripts/install-ai-clis.sh && bash .devcontainer/scripts/start-all.sh",

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-azuretools.vscode-docker",
        "ms-vscode.vscode-typescript-next",
        "esbenp.prettier-vscode",
        "dbaeumer.vscode-eslint",
        "prisma.prisma",
        "ms-ossdata.vscode-postgresql",
        "openai.chatgpt",
        "anthropic.claude-code",
        "mikestead.dotenv",
        "ms-playwright.playwright",
        "orta.vscode-jest",
        "humao.rest-client",
        "redocly.openapi-vs-code",
        "stripe.vscode-stripe",
        "redhat.vscode-yaml",
        "mechatroner.rainbow-csv",
        "cweijan.vscode-redis-client",
        "christian-kohler.npm-intellisense",
        "christian-kohler.path-intellisense",
        "bierner.markdown-mermaid",
        "hediet.vscode-drawio",
        "vivaxy.vscode-conventional-commits",
        "ms-vscode-remote.remote-containers"
      ]
    }
  }
}
