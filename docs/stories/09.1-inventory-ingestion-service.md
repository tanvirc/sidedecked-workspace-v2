# Story 09.1: Inventory Ingestion Service

## Status
Draft

## Story
**As a** vendor integrator,
**I want** inventory ingestion endpoints,
**so that** my stock stays synchronized with SideDecked.

## Acceptance Criteria
1. AC1: API accepts incremental updates (create, update, delete) with idempotent behavior.
2. AC2: Validation ensures catalog mapping and rejects invalid payloads with actionable errors.
3. AC3: Processing pipeline queues jobs and surfaces status to vendor panel.
4. AC4: Ingestion metrics (latency, rows processed) exposed for monitoring.

## Tasks / Subtasks
- [ ] Design ingestion API schema, authentication, and idempotency keys (AC1).
- [ ] Implement validation pipeline resolving catalog IDs and returning error reports (AC2).
- [ ] Queue processing jobs (BullMQ/worker) with status updates accessible via API (AC3).
- [ ] Surface job status in vendor panel dashboard with downloadable reports (AC3).
- [ ] Emit metrics/logs for ingestion performance and expose via monitoring (AC4).
- [ ] Write documentation (API + vendor guide) covering usage and error codes (AC1-AC4).

## Dev Notes
- Backend service likely in `backend/src/modules/inventory/` or create dedicated module.
- Status surfaces to vendor panel components under `vendorpanel/src/pages/inventory/`.
- Use transactions to ensure atomic upserts; stage data before commit.
- Metrics integrate with observability stack; ensure alerts thresholds defined.
- Provide sample client scripts for vendors.

## Testing
- Unit tests for validation and idempotency logic.
- Integration tests simulating bulk CSV/API uploads with mixed results.
- Load testing to ensure throughput for large vendor updates.
- QA scenario verifying vendor panel reflects job progress and errors.

## Change Log
| Date       | Version | Description              | Author |
|------------|---------|--------------------------|--------|
| 2025-09-12 | 0.1.0   | Initial story draft      | Codex  |
