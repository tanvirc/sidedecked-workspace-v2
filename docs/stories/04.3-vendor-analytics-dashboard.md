# Story 4.3: Vendor Analytics Dashboard

## Status
Draft

## Story
**As a** vendor,
**I want** analytics on sales and inventory,
**so that** I can optimize pricing and stock decisions.

## Acceptance Criteria
1. AC1: Dashboard shows GMV, net revenue, sell-through, top SKUs over selectable windows.
2. AC2: Inventory alerts for low stock, stale listings, and pricing anomalies with thresholds.
3. AC3: Exportable CSV reports and scheduled email digests available.
4. AC4: Metrics backed by aggregated tables refreshed nightly.

## Tasks / Subtasks
- [ ] Design analytics API aggregating sales and inventory metrics with date filters (AC1, AC4).
- [ ] Build vendor panel dashboard UI (charts, tables) with filter controls and alert widgets (AC1-AC2).
- [ ] Implement alert configuration + notifications for low stock/stale listings/anomalies (AC2).
- [ ] Provide CSV export endpoint and scheduled digest job emailing vendors (AC3).
- [ ] Create nightly aggregation job populating summary tables for performance (AC4).
- [ ] Update documentation/how-to for interpreting metrics and configuring alerts (AC1-AC3).

## Dev Notes
- Analytics service may live in `backend/src/modules/vendor-analytics`; consider using materialized views for nightly refresh.
- UI page `vendorpanel/src/pages/analytics/index.tsx` to host charts using existing design system.
- Alerts integrate with notification service; ensure quiet hours and dedupe.
- Exports stored temporarily in MinIO; schedule cleanup.
- Ensure metrics align with pricing insights (Epic 07) to avoid conflicting data.

## Testing
- Unit tests for aggregation queries and alert threshold logic.
- Integration tests generating digest emails and verifying CSV export contents.
- Playwright tests: vendor adjusts filters, views charts, downloads report.
- Performance tests for API endpoints under high vendor load.

## Change Log
| Date       | Version | Description              | Author |
|------------|---------|--------------------------|--------|
| 2025-09-13 | 0.1.0   | Initial story draft      | Codex  |
