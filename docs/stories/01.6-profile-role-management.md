# Story 3.1: Profile & Role Management

## Status
Draft

## Story
**As a** user,
**I want** to manage my profile, roles, and linked providers,
**so that** my account stays current across SideDecked experiences.

## Acceptance Criteria
1. AC1: Profile settings allow editing display name, avatar, bio, and location with validation.
2. AC2: Users can connect/disconnect social providers while ensuring at least one login method remains.
3. AC3: Role upgrades (customer â†’ vendor) trigger vendor onboarding and approval workflow.
4. AC4: Audit logs capture profile changes with actor, timestamp, and diff summary.

## Tasks / Subtasks
- [ ] Enhance profile settings UI with editable fields, avatar upload, and client-side validation (AC1).
- [ ] Implement provider linking/unlinking flows with safeguards to maintain at least one auth method (AC2).
- [ ] Add role upgrade CTA that initiates vendor onboarding flow and tracks status (AC3).
- [ ] Persist audit logs for profile/role changes and expose admin review interface (AC4).
- [ ] Sync profile updates to customer backend for community/deck use cases (AC1-AC3).
- [ ] Update documentation and support guides covering profile management features (AC1-AC4).

## Dev Notes
- Storefront profile page at `storefront/src/app/(auth)/user/settings/profile`.
- Avatar uploads should leverage existing asset service (MinIO) with signed upload URLs.
- Provider management interacts with backend auth module; ensure OAuth unlink handles token revocation.
- Role upgrade triggers vendor onboarding story (04.1); integrate via events or API call.
- Audit logging can reuse existing activity log infrastructure in backend; consider event emission for analytics.

## Testing
- Component tests for profile form validation and avatar uploader.
- Integration tests for provider link/unlink and role upgrade triggers.
- Playwright scenario: edit profile, unlink/relink provider, initiate vendor upgrade.
- Verify audit log entries via backend test harness.

## Change Log
| Date       | Version | Description              | Author |
|------------|---------|--------------------------|--------|
| 2025-09-13 | 0.1.0   | Initial story draft      | Codex  |
