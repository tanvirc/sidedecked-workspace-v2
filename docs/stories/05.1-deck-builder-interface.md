# Story 05.1: Deck Builder Interface

## Status
Draft

## Story
**As a** player,
**I want** an interactive deck builder workspace,
**so that** I can assemble decks quickly across multiple games.

## Acceptance Criteria
1. AC1: Workspace supports drag-and-drop, search, filters, and keyboard shortcuts.
2. AC2: Multiple game modes (MTG, Pok√©mon, Yu-Gi-Oh!, One Piece) with dynamic rulesets.
3. AC3: Mana/energy/attribute summaries update in real time.
4. AC4: Autosave to drafts with offline fallback for connectivity interruptions.

## Tasks / Subtasks
- [ ] Implement deck builder UI shell with drag-and-drop and responsive layout (AC1).
- [ ] Integrate search/filter panel pulling catalog data per selected game (AC2).
- [ ] Compute and display deck metrics (mana curve, energy, attributes) with live updates (AC3).
- [ ] Add autosave mechanism using API + local storage fallback for offline (AC4).
- [ ] Handle multi-game switching ensuring rulesets and UI adjust accordingly (AC2).
- [ ] Add telemetry + accessibility checks for the deck workspace (AC1-AC4).

## Dev Notes
- Storefront deck components: `storefront/src/components/deck-builder/` and `storefront/src/app/(auth)/decks/` routes.
- Use virtualization for large card lists (consider `react-window`).
- Fetch game-specific metadata via customer backend endpoints (`customer-backend/packages/deck-builder/src/api`).
- Autosave should create "draft" records in deck service with conflict resolution.
- Keyboard shortcuts defined in UX spec; ensure focus management.

## Testing
- Component tests for drag-and-drop; consider using testing libs that support DnD (e.g., `@testing-library/user-event`).
- Unit tests for metrics calculation functions.
- Integration test ensuring autosave persists after network loss.
- Playwright scenario: build deck, switch games, confirm summaries update.

## Change Log
| Date       | Version | Description              | Author |
|------------|---------|--------------------------|--------|
| 2025-09-12 | 0.1.0   | Initial story draft      | Codex  |
