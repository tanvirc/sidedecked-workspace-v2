# Story 06.1: Activity Feed & Notifications

## Status
Draft

## Story
**As a** user,
**I want** an activity feed with configurable notifications,
**so that** I can stay updated on decks, prices, and community events.

## Acceptance Criteria
1. AC1: Feed aggregates events (new decks, price alerts, vendor promotions) personalized per user.
2. AC2: Users can subscribe/unsubscribe to feed categories and receive email/push alerts.
3. AC3: Real-time updates delivered via SSE or WebSocket for live sessions.
4. AC4: Feed items are clickable to relevant resources with tracking instrumentation.

## Tasks / Subtasks
- [ ] Design feed event schema and aggregation logic in customer backend (AC1).
- [ ] Implement subscription preferences API + UI for category opt-in/out (AC2).
- [ ] Build real-time delivery channel (SSE/WebSocket) with fallbacks (AC3).
- [ ] Update storefront feed UI to render events with tracking metadata (AC4).
- [ ] Connect notification service to send email/push based on preferences (AC2).
- [ ] Instrument analytics to track engagement and click-through (AC4).

## Dev Notes
- Event sourcing tables likely under `customer-backend/packages/community/` â€“ define new entity for activity events.
- Subscription preferences stored per user with defaults; ensure GDPR compliance.
- Real-time transport may reuse existing websockets (check `storefront/src/lib/realtime`).
- Notifications integrate with TalkJS or other service; confirm endpoints.
- Add API docs for new feed endpoints.

## Testing
- Unit tests for event aggregation filters and personalization logic.
- Integration tests for subscription updates and notification dispatch.
- WebSocket/SSE tests verifying live updates (use mocked clients in Jest).
- Playwright scenario covering preference toggle and feed interaction.

## Change Log
| Date       | Version | Description              | Author |
|------------|---------|--------------------------|--------|
| 2025-09-12 | 0.1.0   | Initial story draft      | Codex  |
