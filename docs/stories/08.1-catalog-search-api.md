# Story 08.1: Catalog Search API & Indexing

## Status
Draft

## Story
**As a** shopper,
**I want** fast, accurate search results,
**so that** I can find cards quickly across the catalog.

## Acceptance Criteria
1. AC1: Index includes card name, set, rarity, condition, price, vendor availability.
2. AC2: Search latency under 200ms P95 with pagination and highlighting.
3. AC3: Filters for game, price range, language, foil, vendor type.
4. AC4: Synonym and typo tolerance configured per game with analytics feedback loop.

## Tasks / Subtasks
- [ ] Define search indexing pipeline (Algolia or internal) with required fields (AC1).
- [ ] Implement search API proxy in storefront/customer backend to enforce latency SLAs (AC2).
- [ ] Add filter configuration and UI controls for advanced facets (AC3).
- [ ] Configure relevance tuning (synonyms, typo tolerance) and analytics capture (AC4).
- [ ] Establish index refresh strategy (full nightly + incremental) (AC1, AC4).
- [ ] Document operational dashboards for search health metrics (AC2-AC4).

## Dev Notes
- Index population triggered by catalog ETL events (see Story 03.1).
- Storefront search UI: `storefront/src/components/search/`.
- Use Algolia analytics APIs for feedback; store metrics for future tuning.
- Ensure backend proxies enforce authentication and rate limiting as needed.
- Capture logs for slow queries to monitor latency.

## Testing
- Unit tests for query builders and filter serialization.
- Integration tests hitting staging index verifying fields/filters.
- Synthetic performance tests measuring response latency.
- Accessibility tests for filter UI (keyboard navigation, screen readers).

## Change Log
| Date       | Version | Description              | Author |
|------------|---------|--------------------------|--------|
| 2025-09-12 | 0.1.0   | Initial story draft      | Codex  |
