# Story 8.2: Discovery & Recommendations

## Status
Draft

## Story
**As a** user,
**I want** personalized recommendations,
**so that** I discover relevant cards and decks quickly.

## Acceptance Criteria
1. AC1: Recommendation modules surface on home page, card pages, and deck pages.
2. AC2: Signals include purchase history, deck composition, and viewing behavior.
3. AC3: Cold-start fallback uses trending cards and staff picks.
4. AC4: Users can dismiss recommendations which feeds suppression list.

## Tasks / Subtasks
- [ ] Build recommendation engine aggregating behavioral signals and generating ranked lists (AC1-AC2).
- [ ] Integrate modules into storefront home, card, and deck pages with loading states (AC1).
- [ ] Implement cold-start fallback logic using curated/trending datasets (AC3).
- [ ] Add dismiss/feedback controls storing suppression list per user (AC4).
- [ ] Monitor recommendation performance (CTR, conversion) with analytics dashboards (AC1-AC4).
- [ ] Ensure privacy controls for data usage and add opt-out settings (AC2-AC4).

## Dev Notes
- Recommendation service may live in `customer-backend/packages/search/recommendations` using offline batch or online scoring.
- Signals captured via event pipeline; ensure GDPR compliance and anonymization as needed.
- Storefront modules in `storefront/src/components/recommendations/` with SSR support for SEO-critical pages.
- Suppression list stored in Redis/DB and respected across modules.
- Provide admin tooling to manage staff picks/trending lists.

## Testing
- Unit tests for recommendation ranking and suppression logic.
- Integration tests verifying fallback recommendations when signals absent.
- Playwright scenario: user dismisses recommendation, confirms removal across pages.
- Analytics validation comparing CTR before/after rollout.

## Change Log
| Date       | Version | Description              | Author |
|------------|---------|--------------------------|--------|
| 2025-09-13 | 0.1.0   | Initial story draft      | Codex  |
